<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<title>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    font-family:'Cairo',Tahoma;
    background:linear-gradient(-45deg,#0b4fa3,#1c6dd0,#0d47a1,#1565c0);
    background-size:400% 400%;
    animation:bgMove 12s ease infinite;
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
}

/* Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© */
@keyframes bgMove{
0%{background-position:0% 50%}
50%{background-position:100% 50%}
100%{background-position:0% 50%}
}

/* Ø´Ø§Ø´Ø© ØªØ­Ù…ÙŠÙ„ */
#loader{
position:fixed;
inset:0;
background:#0b4fa3;
display:flex;
justify-content:center;
align-items:center;
z-index:999;
color:white;
font-size:22px;
font-weight:bold;
}

/* Ø§Ù„ÙƒØ±Øª */
.card{
    background:#fff;
    width:100%;
    max-width:640px;
    border-radius:22px;
    overflow:hidden;
    position:relative;
    border:3px solid #1c6dd0;
    animation:fade .9s ease, pulseGlow 2.5s infinite;
}

/* ØªÙˆÙ‡Ø¬ Ù†Ø§Ø¨Ø¶ */
@keyframes pulseGlow{
0%{
box-shadow:0 0 5px #1c6dd0;
}
50%{
box-shadow:0 0 35px #1c6dd0;
}
100%{
box-shadow:0 0 5px #1c6dd0;
}
}

/* Ø®Ù„ÙÙŠØ© Ù…Ø§Ø¦ÙŠØ© */
.card:before{
content:"";
position:absolute;
inset:0;
background:url("{{ url_for('static', filename='watermark.jpg') }}") no-repeat center;
background-size:60%;
opacity:0.05;
pointer-events:none;
}

/* Ø¯Ø§Ø±Ùƒ Ù…ÙˆØ¯ */
@media (prefers-color-scheme: dark){
body{background:#0e1623;}
.card{background:#121c2b;color:#fff;}
input{background:#1c2a40;color:#fff;border-color:#355c8a}
}

/* Ø­Ø±ÙƒØ© Ø¯Ø®ÙˆÙ„ */
@keyframes fade{
from{opacity:0; transform:translateY(30px)}
to{opacity:1; transform:translateY(0)}
}

/* Ù‡ÙŠØ¯Ø± */
.header{
background:linear-gradient(135deg,#0b4fa3,#1c6dd0);
padding:25px;
text-align:center;
color:#fff;
}

/* Ø´Ø¹Ø§Ø± */
.header img{
width:170px;
background:#fff;
padding:8px;
border-radius:12px;
margin-bottom:12px;
animation:float 3s ease-in-out infinite;
}

@keyframes float{
0%{transform:translateY(0)}
50%{transform:translateY(-6px)}
100%{transform:translateY(0)}
}

/* Ø¹Ù†Ø§ÙˆÙŠÙ† */
.title{font-size:26px;font-weight:900}
.sub{font-size:18px;opacity:.95}

/* Ø¬Ø³Ù… Ø§Ù„ÙÙˆØ±Ù… */
.body{padding:35px 30px;text-align:center}

/* Ø§Ù„Ø­Ù‚ÙˆÙ„ */
input{
width:100%;
padding:13px;
margin:10px 0;
border-radius:10px;
border:1px solid #ccc;
}

/* Ø¹ÙŠÙ† */
.field{position:relative}
.eye{
position:absolute;
left:12px;
top:14px;
cursor:pointer;
}

/* Ø²Ø± */
button{
background:#0b4fa3;
color:#fff;
border:none;
padding:13px 50px;
border-radius:10px;
font-size:17px;
font-weight:bold;
cursor:pointer;
}

/* Ø±Ø³Ø§Ø¦Ù„ */
.msg{
margin-top:12px;
padding:10px;
border-radius:8px;
font-weight:bold;
display:none;
}
.error{background:#c62828;color:#fff}

/* ØªÙˆÙ‚ÙŠØ¹ */
.signature{
text-align:left;
padding:12px 18px;
font-size:15px;
color:#555;
font-weight:900;
}
.signature span{color:#0b4fa3}
</style>
</head>

<body>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
<div id="loader">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„ ...</div>

<div class="card">

<div class="header">
<img src="{{ url_for('static', filename='new_logo.png') }}">
<div class="title">ÙˆØ²Ø§Ø±Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡</div>
<div class="sub">Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ø¥Ù†ØªØ§Ø¬ â€“ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙˆØ³Ø·Ù‰</div>
<div class="sub">Ù…Ø­Ø·Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø¹Ù„ÙŠ Ø³Ø¨Ø¹</div>
<div class="sub">Ù‚Ø³Ù… Ø§Ù„Ø´Ø¤ÙˆÙ† Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©</div>
</div>

<div class="body">

<form method="POST" onsubmit="return countTry()">

<input type="text" name="emp_id" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ¸ÙŠÙÙŠ" required>

<div class="field">
<input type="password" id="pass" name="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
<span class="eye" onclick="togglePass()">ğŸ‘</span>
</div>

<button>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
</form>

{% if error %}
<div class="msg error" id="serverMsg" style="display:block">
âš  {{ error }}
</div>
{% endif %}

<div class="msg error" id="clientMsg"></div>

</div>

<div class="signature">
<span>ØªØµÙ…ÙŠÙ…</span> ğŸ‘ˆ <span>Ø­Ø³ÙŠÙ† Ø§Ù„ØªÙ…ÙŠÙ…ÙŠ</span>
</div>

</div>

<!-- ØµÙˆØª -->
<audio id="alertSound">
<source src="{{ url_for('static', filename='alert.mp3') }}" type="audio/mpeg">
</audio>

<script>
/* Ø§Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
window.onload = ()=>{
document.getElementById("loader").style.display="none";
}

/* Ù…Ø­Ø§ÙˆÙ„Ø§Øª */
let tries=3;
let lockTime=30; // ÙˆÙ‚Øª Ø§Ù„Ø­Ø¸Ø±

function togglePass(){
let x=document.getElementById("pass");
x.type = x.type==="password" ? "text" : "password";
}

function playSound(){
document.getElementById("alertSound").play();
}

function vibrate(){
if(navigator.vibrate){
navigator.vibrate([200,100,200]);
}
}

function countTry(){
if(tries<=0){
startLock();
return false;
}

tries--;

document.getElementById("clientMsg").style.display="block";
document.getElementById("clientMsg").innerHTML=
"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: "+tries;

playSound();
vibrate();

if(tries<=0){
startLock();
}

logFail(); // ØªØ³Ø¬ÙŠÙ„ Ù…Ø­Ø§ÙˆÙ„Ø©
return true;
}

/* Ù‚ÙÙ„ Ù…Ø¤Ù‚Øª */
function startLock(){
let btn=document.querySelector("button");
btn.disabled=true;

let t=lockTime;
let msg=document.getElementById("clientMsg");
msg.innerHTML="ØªÙ… Ø§Ù„Ø­Ø¸Ø± Ù„Ù…Ø¯Ø© "+t+" Ø«Ø§Ù†ÙŠØ©";

let timer=setInterval(()=>{
t--;
msg.innerHTML="ØªÙ… Ø§Ù„Ø­Ø¸Ø± Ù„Ù…Ø¯Ø© "+t+" Ø«Ø§Ù†ÙŠØ©";
if(t<=0){
clearInterval(timer);
btn.disabled=false;
tries=3;
msg.innerHTML="ØªÙ… ÙÙƒ Ø§Ù„Ø­Ø¸Ø± ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©";
}
},1000);
}

/* ØªØ³Ø¬ÙŠÙ„ Ù…Ø­Ø§ÙˆÙ„Ø§Øª */
function logFail(){
let logs=JSON.parse(localStorage.getItem("fails")||"[]");
logs.push(new Date().toLocaleString());
localStorage.setItem("fails",JSON.stringify(logs));
}
</script>

</body>
</html>