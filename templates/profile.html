<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<title>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;700;900&display=swap" rel="stylesheet">

<style>
body{
    font-family:'Cairo', Tahoma;
    margin:0;
    padding:20px;
    background:#f4f6f8;
    position:relative;
}

/* Ø¹Ù„Ø§Ù…Ø© Ù…Ø§Ø¦ÙŠØ© Ù†Ø§Ø¨Ø¶Ø© */
body::before{
    content:"";
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:90%;
    height:90%;
    background:url("{{ url_for('static', filename='watermark.jpg') }}") no-repeat center;
    background-size:contain;
    opacity:0.08;
    z-index:-1;
    animation:waterPulse 6s infinite;
}

@keyframes waterPulse{
    0%{transform:translate(-50%,-50%) scale(1);}
    50%{transform:translate(-50%,-50%) scale(1.05);}
    100%{transform:translate(-50%,-50%) scale(1);}
}

/* Ø§Ù„Ù‡ÙŠØ¯Ø± */
.top-bar{
    background:linear-gradient(135deg,#0b4fa3,#1c6dd0);
    border-radius:20px;
    padding:25px;
    margin-bottom:20px;
    text-align:center;
    color:white;
    animation:fadeDown 1s ease;
}

@keyframes fadeDown{
    from{opacity:0;transform:translateY(-20px);}
    to{opacity:1;transform:translateY(0);}
}

/* Ø§Ù„Ø´Ø¹Ø§Ø± Ø¯Ø§Ø¦Ø±ÙŠ */
.top-bar img{
    height:95px;
    width:95px;
    border-radius:50%;
    background:white;
    padding:6px;
    margin-bottom:10px;
    animation:pulse 3s infinite;
}

@keyframes pulse{
    0%{transform:scale(1);}
    50%{transform:scale(1.05);}
    100%{transform:scale(1);}
}

.welcome{
    font-size:28px;
    font-weight:800;
}

.station{
    font-size:34px;
    font-weight:900;
}

.dept{
    font-size:18px;
    opacity:.9;
}

/* ÙƒØ±Øª Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª */
.card{
    background:#eaf6ff;
    border-radius:18px;
    padding:20px;
}

table{
    width:100%;
    border-collapse:collapse;
}

td{
    padding:12px;
    border-bottom:1px solid #d0e3f5;
}

.k{
    width:45%;
    font-weight:bold;
    color:#083b7c;
}

/* ØªÙ†Ø¨ÙŠÙ‡ */
.alert{
    margin-top:15px;
    padding:12px;
    border-radius:10px;
    font-weight:bold;
    text-align:center;
    display:none;
}

.orange{background:#fff3cd;color:#856404;}
.red{background:#ffe5e5;color:#b30000;}
.dark{background:#e0e0e0;color:#333;}

/* Ø±ÙˆØ§Ø¨Ø· */
.links{
    text-align:center;
    margin-top:20px;
}
.links a{
    font-weight:bold;
    text-decoration:none;
    margin:0 10px;
}

/* Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ« */
.last-update{
    margin-top:15px;
    padding:10px;
    background:#dff0ff;
    border-radius:8px;
    color:#004a7c;
    font-weight:bold;
    text-align:center;
}

/* ÙÙˆØªØ± */
.footer{
    margin-top:25px;
    text-align:center;
    font-weight:bold;
    color:#444;
}
</style>
</head>

<body>

<!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
<div class="top-bar">

<img src="{{ url_for('static', filename='watermark.jpg') }}">

<div class="welcome">
Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ…
</div>

<div class="station">
Ù…Ø­Ø·Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø¹Ù„ÙŠ Ø³Ø¨Ø¹
</div>

<div class="dept">
Ù‚Ø³Ù… Ø§Ù„Ø´Ø¤ÙˆÙ† Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©
</div>

</div>

<!-- Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
<div class="card">
<table>

<tr><td class="k">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</td><td>{{ emp_id }}</td></tr>
<tr><td class="k">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</td><td>{{ data["Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"] }}</td></tr>
<tr><td class="k">Ø§Ù„ØªØ­ØµÙŠÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</td><td>{{ data["Ø§Ù„ØªØ­ØµÙŠÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ"] }}</td></tr>
<tr><td class="k">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</td><td>{{ data["Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ¸ÙŠÙÙŠ"] }}</td></tr>
<tr><td class="k">Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</td><td>{{ data["Ø§Ù„Ø¯Ø±Ø¬Ø©"] }}</td></tr>
<tr><td class="k">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</td><td>{{ data["Ø§Ù„Ù…Ø±Ø­Ù„Ø©"] }}</td></tr>

<tr>
<td class="k">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¯Ù…</td>
<td id="dueDate">{{ data["ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚"] }}</td>
</tr>

<tr><td class="k">Ø¹Ø¯Ø¯ ÙƒØªØ¨ Ø§Ù„Ø´ÙƒØ±</td><td>{{ data["Ø¹Ø¯Ø¯ ÙƒØªØ¨ Ø§Ù„Ø´ÙƒØ±"] }}</td></tr>

{% if data["Ø±Ù‚Ù… ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„ÙƒØªØ¨"] and data["Ø±Ù‚Ù… ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„ÙƒØªØ¨"] != "nan" %}
<tr>
<td class="k">Ø±Ù‚Ù… ÙˆØªØ§Ø±ÙŠØ® ÙƒØªØ¨ Ø§Ù„Ø´ÙƒØ±</td>
<td style="white-space:pre-line;">
{{ data["Ø±Ù‚Ù… ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„ÙƒØªØ¨"].replace("||", "\n") }}
</td>
</tr>
{% endif %}

<tr><td class="k">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</td><td>{{ data["Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª"] }}</td></tr>

</table>

<div id="alertBox" class="alert"></div>

<div class="last-update">
Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ« Ù…Ù† Ù‚Ø³Ù… Ø§Ù„Ø´Ø¤ÙˆÙ† Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©: {{ last_update }}
</div>

<div class="links">
<a href="{{ url_for('change_password') }}">ğŸ”‘ ØªØºÙŠÙŠØ± Ø§Ù„Ø¨Ø§Ø³ÙˆÙˆØ±Ø¯</a> |
<a href="{{ url_for('logout') }}">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</a>
</div>

</div>

<!-- ØµÙˆØª -->
<audio id="alertSound">
<source src="{{ url_for('static', filename='alert.mp3') }}" type="audio/mpeg">
</audio>

<div class="footer">
ØªØµÙ…ÙŠÙ…: Ø­Ø³ÙŠÙ† Ø§Ù„ØªÙ…ÙŠÙ…ÙŠ
</div>

<script>
let d=document.getElementById("dueDate").innerText.trim();
let a=document.getElementById("alertBox");
let s=document.getElementById("alertSound");

if(d){
let p=d.split("/");
let due=new Date(p[2],p[0]-1,p[1]);
let t=new Date();
let diff=Math.ceil((due-t)/(1000*60*60*24));

if(diff<=0){
a.style.display="block";
a.className="alert dark";
a.innerHTML="âš« Ø§Ù†ØªÙ‡Ù‰ Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚";
s.play();
}
else if(diff<=14){
a.style.display="block";
a.className="alert red";
a.innerHTML="ğŸ”´ ØªØ¨Ù‚Ù‰ "+diff+" ÙŠÙˆÙ… Ø¹Ù„Ù‰ Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚";
s.play();
}
else if(diff<=30){
a.style.display="block";
a.className="alert orange";
a.innerHTML="ğŸŸ  ØªØ¨Ù‚Ù‰ "+diff+" ÙŠÙˆÙ… Ø¹Ù„Ù‰ Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚";
}
}
</script>

</body>
</html>